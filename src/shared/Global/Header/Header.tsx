import React, { useEffect, useRef, useState } from "react";
import { Link, useLocation } from "react-router-dom";

import s from "./Header.module.scss";

export const Header = () => {
  const [visible, setVisible] = useState(false);

  function showPopUp() {
    setVisible(!visible);
  }

  return (
    <div className={s.header}>
      <div className={s.wrapper}>
        <div className={s.nav}>
          <Link
            to="/"
            className={`${s.link} ${
              useLocation().pathname === "/" ? s.active : ""
            }`}
          >
            <div className={s.icon}>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M11.8435 6.46868C11.8435 8.67181 10.0406 10.4374 7.79094 10.4374C5.54208 10.4374 3.73842 8.67181 3.73842 6.46868C3.73842 4.26554 5.54208 2.5 7.79094 2.5C10.0406 2.5 11.8435 4.26554 11.8435 6.46868ZM1.6665 14.9311C1.6665 12.8917 4.48778 12.3814 7.79095 12.3814C11.1121 12.3814 13.9154 12.9093 13.9154 14.9503C13.9154 16.9897 11.0941 17.5 7.79095 17.5C4.46984 17.5 1.6665 16.9722 1.6665 14.9311ZM13.4777 6.54063C13.4777 7.66256 13.1336 8.70942 12.5302 9.57902C12.4674 9.66846 12.5228 9.78903 12.6321 9.8082C12.7838 9.83295 12.9395 9.84812 13.0985 9.85132C14.6804 9.89204 16.1 8.89468 16.4922 7.39265C17.0736 5.16397 15.3678 3.16286 13.1947 3.16286C12.9591 3.16286 12.7332 3.18682 12.5131 3.23073C12.4829 3.23712 12.4503 3.2515 12.434 3.27705C12.4128 3.30979 12.4283 3.35211 12.4495 3.38006C13.1026 4.2768 13.4777 5.36839 13.4777 6.54063ZM16.0975 11.4186C17.1608 11.6222 17.8596 12.0366 18.1491 12.6411C18.3945 13.1362 18.3945 13.7111 18.1491 14.2062C17.7063 15.1421 16.2777 15.4431 15.7225 15.5206C15.6075 15.5366 15.5153 15.4408 15.5276 15.3274C15.8113 12.7338 13.5551 11.504 12.9713 11.2213C12.9468 11.2078 12.9411 11.1886 12.9436 11.1758C12.9452 11.1678 12.9558 11.1551 12.9746 11.1527C14.2376 11.1287 15.5961 11.2988 16.0975 11.4186Z"
                  fill="#1E174D"
                />
              </svg>
            </div>
            <div className={s.text}>
              <p> Пользователи</p>
            </div>
          </Link>
          <Link
            to="/logs"
            className={`${s.link} ${
              useLocation().pathname === "/logs" ? s.active : ""
            }`}
          >
            <div className={s.icon}>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M11.8435 6.46868C11.8435 8.67181 10.0406 10.4374 7.79094 10.4374C5.54208 10.4374 3.73842 8.67181 3.73842 6.46868C3.73842 4.26554 5.54208 2.5 7.79094 2.5C10.0406 2.5 11.8435 4.26554 11.8435 6.46868ZM1.6665 14.9311C1.6665 12.8917 4.48778 12.3814 7.79095 12.3814C11.1121 12.3814 13.9154 12.9093 13.9154 14.9503C13.9154 16.9897 11.0941 17.5 7.79095 17.5C4.46984 17.5 1.6665 16.9722 1.6665 14.9311ZM13.4777 6.54063C13.4777 7.66256 13.1336 8.70942 12.5302 9.57902C12.4674 9.66846 12.5228 9.78903 12.6321 9.8082C12.7838 9.83295 12.9395 9.84812 13.0985 9.85132C14.6804 9.89204 16.1 8.89468 16.4922 7.39265C17.0736 5.16397 15.3678 3.16286 13.1947 3.16286C12.9591 3.16286 12.7332 3.18682 12.5131 3.23073C12.4829 3.23712 12.4503 3.2515 12.434 3.27705C12.4128 3.30979 12.4283 3.35211 12.4495 3.38006C13.1026 4.2768 13.4777 5.36839 13.4777 6.54063ZM16.0975 11.4186C17.1608 11.6222 17.8596 12.0366 18.1491 12.6411C18.3945 13.1362 18.3945 13.7111 18.1491 14.2062C17.7063 15.1421 16.2777 15.4431 15.7225 15.5206C15.6075 15.5366 15.5153 15.4408 15.5276 15.3274C15.8113 12.7338 13.5551 11.504 12.9713 11.2213C12.9468 11.2078 12.9411 11.1886 12.9436 11.1758C12.9452 11.1678 12.9558 11.1551 12.9746 11.1527C14.2376 11.1287 15.5961 11.2988 16.0975 11.4186Z"
                  fill="#1E174D"
                />
              </svg>
            </div>
            <div className={s.text}>
              <p> События</p>
            </div>
          </Link>
        </div>
        <div className={s.btns}>
          <div className={s.chat}>
            <div className={s.icon}>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12.058 2.0002C8.54635 1.98609 5.28554 3.80697 3.46059 6.80006C1.63541 9.79355 1.51288 13.5226 3.13765 16.6291L3.32147 16.9875C3.39175 17.1192 3.40531 17.2613 3.36458 17.3926C3.10204 18.0864 2.87136 18.8357 2.6873 19.5969L2.66776 19.7609C2.66776 20.5263 3.07616 21.0522 3.88671 21.0342L4.02167 21.018C4.75798 20.8554 5.4831 20.6459 6.19261 20.3908C6.28665 20.3671 6.4407 20.3763 6.57971 20.4332L7.26224 20.8194C7.26378 20.8242 7.26493 20.8277 7.27208 20.8319L7.31788 20.8479C10.9929 22.7803 15.4812 22.2472 18.5997 19.5078C21.7187 16.7681 22.8199 12.3901 21.3675 8.50383C19.9153 4.61799 16.2115 2.03073 12.058 2.0002ZM11.7675 3.39899L12.0484 3.39459C15.6231 3.42178 18.8109 5.64858 20.0605 8.99231C21.31 12.3357 20.3626 16.1021 17.6788 18.4595L17.4587 18.6466C14.8626 20.778 11.2582 21.2076 8.23269 19.7467L7.94496 19.6025L7.95729 19.6042L7.93909 19.5992L7.51677 19.3569C7.36471 19.2709 7.24408 19.2058 7.14685 19.159C6.6837 18.9681 6.21354 18.9399 5.77133 19.0617L5.35272 19.2055C5.07605 19.2968 4.80372 19.3794 4.53273 19.4541L4.13767 19.5573L4.04356 19.9249C4.21419 19.2192 4.42804 18.5246 4.68389 17.8451C4.84853 17.3182 4.79818 16.7905 4.55755 16.3402L4.37662 15.9873C2.97627 13.3098 3.08168 10.1019 4.65196 7.52645C6.17338 5.03117 8.85494 3.48232 11.7675 3.39899ZM6.4746 12.0002C6.4746 11.37 6.98586 10.8595 7.61596 10.8595C8.24606 10.8595 8.75732 11.37 8.75732 12.0002C8.75732 12.6304 8.24606 13.1408 7.61596 13.1408C6.98586 13.1408 6.4746 12.6304 6.4746 12.0002ZM10.9115 12.0002C10.9115 11.37 11.4227 10.8595 12.0528 10.8595C12.6829 10.8595 13.1942 11.37 13.1942 12.0002C13.1942 12.6304 12.6829 13.1408 12.0528 13.1408C11.4227 13.1408 10.9115 12.6304 10.9115 12.0002ZM16.4897 10.8595C15.8596 10.8595 15.3484 11.37 15.3484 12.0002C15.3484 12.6304 15.8596 13.1408 16.4897 13.1408C17.1198 13.1408 17.6311 12.6304 17.6311 12.0002C17.6311 11.37 17.1198 10.8595 16.4897 10.8595Z"
                  fill="#736F8B"
                />
              </svg>
            </div>
          </div>
          <div className={s.options} onClick={showPopUp}>
            <div className={s.icon}>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M20.4023 13.5801C20.76 13.7701 21.036 14.0701 21.2301 14.3701C21.6083 14.9901 21.5776 15.7501 21.2097 16.4201L20.4943 17.6201C20.1162 18.2601 19.411 18.6601 18.6855 18.6601C18.3278 18.6601 17.9292 18.5601 17.6022 18.3601C17.3365 18.1901 17.0299 18.1301 16.7029 18.1301C15.6911 18.1301 14.8429 18.9601 14.8122 19.9501C14.8122 21.1001 13.872 22.0001 12.6968 22.0001H11.3069C10.1215 22.0001 9.18125 21.1001 9.18125 19.9501C9.16081 18.9601 8.31259 18.1301 7.30085 18.1301C6.96361 18.1301 6.65702 18.1901 6.40153 18.3601C6.0745 18.5601 5.66572 18.6601 5.31825 18.6601C4.58245 18.6601 3.87729 18.2601 3.49917 17.6201L2.79402 16.4201C2.4159 15.7701 2.39546 14.9901 2.77358 14.3701C2.93709 14.0701 3.24368 13.7701 3.59115 13.5801C3.87729 13.4401 4.06125 13.2101 4.23498 12.9401C4.74596 12.0801 4.43937 10.9501 3.57071 10.4401C2.55897 9.87012 2.23194 8.60012 2.81446 7.61012L3.49917 6.43012C4.09191 5.44012 5.35913 5.09012 6.38109 5.67012C7.27019 6.15012 8.425 5.83012 8.9462 4.98012C9.10972 4.70012 9.20169 4.40012 9.18125 4.10012C9.16081 3.71012 9.27323 3.34012 9.4674 3.04012C9.84553 2.42012 10.5302 2.02012 11.2763 2.00012H12.7172C13.4735 2.00012 14.1582 2.42012 14.5363 3.04012C14.7203 3.34012 14.8429 3.71012 14.8122 4.10012C14.7918 4.40012 14.8838 4.70012 15.0473 4.98012C15.5685 5.83012 16.7233 6.15012 17.6226 5.67012C18.6344 5.09012 19.9118 5.44012 20.4943 6.43012L21.179 7.61012C21.7718 8.60012 21.4447 9.87012 20.4228 10.4401C19.5541 10.9501 19.2475 12.0801 19.7687 12.9401C19.9322 13.2101 20.1162 13.4401 20.4023 13.5801ZM9.10972 12.0101C9.10972 13.5801 10.4076 14.8301 12.0121 14.8301C13.6165 14.8301 14.8838 13.5801 14.8838 12.0101C14.8838 10.4401 13.6165 9.18012 12.0121 9.18012C10.4076 9.18012 9.10972 10.4401 9.10972 12.0101Z"
                  fill="#736F8B"
                />
              </svg>
            </div>
            {visible && <PopUp />}
          </div>
        </div>
      </div>
    </div>
  );
};

const PopUp = () => {
  return (
    <div className={s.popup}>
      <div className={s.element}>
        <Link to="/profile">Профиль</Link>
      </div>
      <div className={s.element}>
        <a>Выйти</a>
      </div>
    </div>
  );
};
